<!DOCTYPE html>
<meta charset="utf-8">

<link href="/css/dress-code.min.css" rel="stylesheet">
<link href="/css/typhoon.css" rel="stylesheet">
<link href="/css/viz.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,500" rel="stylesheet">

<body>
<div class="dc-page">
<div class="dc-container">
   <div class="dc-loading-bar">
      <div class="dc-loading-bar__bar"></div>
      <div class="dc-loading-bar__fill"></div>
   </div>

   <div class="dc-card t-no-print">
      <div class="dc-row dc-row--align--middle">
         <div class="dc-column dc-column--shrink">
            <div class="dc-column__contents">
               <img class="t-logo" src="img/typhoon_logo.svg">
            </div>
         </div>
         <div class="dc-column dc-column--small-3">
            <div class="dc-column__contents">
               <h1 class="dc-h1">Typhoon</h1>
               <p class="dc--text-small">
                  Makes latency assessments of distributed systems build from microservices.
               </p>
            </div>
         </div>
         <div class="dc-column dc-column--small-1">
            <div class="dc-column__contents">
               <h4 class="dc-h4">Time</h4>
               <p class="dc--text"><strong class="js-system-time">&nbsp;</strong></p>
            </div>
         </div>
         <div class="dc-column dc-column--small-1">
            <div class="dc-column__contents">
               <h4 class="dc-h4">Nodes</h4>
               <p class="dc--text"><strong class="js-system-peers">&nbsp;</strong></p>
            </div>
         </div>
         <div class="dc-column dc-column--small-1">
            <div class="dc-column__contents">
               <h4 class="dc-h4">Scenario</h4>
               <p class="dc--text"><strong class="js-system-scenario">&nbsp;</strong></p>
            </div>
         </div>
         <div class="dc-column dc-column--small-1">
            <div class="dc-column__contents">
               <h4 class="dc-h4">Load</h4>
               <p class="dc--text"><strong class="js-system-rps">&nbsp;</strong></p>
            </div>
         </div>
         <div class="dc-column dc-column--small-1">
            <div class="dc-column__contents">
               <h4 class="dc-h4">Failure</h4>
               <p class="dc--text"><strong class="js-system-failure">&nbsp;</strong></p>
            </div>
         </div>
      </div>
   </div>


   <h1 class="dc-h1 t-no-print">Available Workload Scenarios</h1>
   <div class="dc-card t-no-print">
      <div class="t-item-controls">
         <button class="dc-btn dc-btn--link t-control js-action-scenario-new">New Scenario</button>
      </div>

      <table class="dc-table">
         <thead class="dc-table__thead">
            <tr class="dc-table__tr">
               <th class="dc-table__th">ID</th>
               <th class="dc-table__th">Title</th>
               <th class="dc-table__th">Duration <span class="dc--text-small">(ms)</span></th>
               <th class="dc-table__th">Sessions <span class="dc--text-small">(#)</span></th>
               <th class="dc-table__th">Capacity <span class="dc--text-small">(RPS)</span></th>
               <th class="dc-table__th">Availability <span class="dc--text-small">(%)</span></th>
               <th class="dc-table__th">Latency <span class="dc--text-small">(μs)</span></th>
               <th class="dc-table__th">Status</th>
            </tr>
         </thead>
         <tbody class="dc-table__tbody js-scenario-thumbnail"></tbody>
      </table>
   </div>

   <div class="js-scenario">
   <h1 class="dc-h1 t-no-print">Scenario <q class="js-scenario-title"></q></h1>
   <div class="dc-card dc-card__scenario t-no-print">
      <div class="t-item-controls">
         <button class="dc-btn dc-btn--link js-action-scenario-hide">Hide</button>
         <button class="dc-btn dc-btn--link dc-btn--disabled js-action-scenario-spawn">Launch</button>
         <button class="dc-btn dc-btn--link dc-btn--destroy dc-btn--disabled js-action-scenario-abort">Abort</button>
         <button class="dc-btn dc-btn--link dc-btn--destroy dc-btn--disabled js-action-scenario-remove">Remove</button>
      </div>
      <div class="dc-side-revealer">
         <div class="js-scenario-cubism">
            <h2 class="dc-h2">Behavior</h2>
            <div class="js-scenario-cubism-user">No content</div>

            <h2 class="dc-h2">Application</h2>
            <div class="js-scenario-cubism-url">No content</div>

            <h2 class="dc-h2">Network</h2>
            <div class="js-scenario-cubism-host">No content</div>

            <div id="series"></div>
         </div>

         <input class="dc-side-revealer__toggle dc-icon js-scenario-spec" type="checkbox" />
         <div class="dc-side-revealer__content dc-card dc-card__editor">
            <pre id="js-ace-editor" class="t-ace-editor"></pre>
         </div>
      </div>
   </div>

   <h2 class="dc-h2 t-no-print">History of <q class="js-scenario-title"></q></h2>
   <div class="dc-card dc-card__history t-no-print">
      <table class="dc-table">
         <thead class="dc-table__thead">
            <tr class="dc-table__tr">
               <th class="dc-table__th">Date</th>
               <th class="dc-table__th">Duration</th>
               <!--
               <th class="dc-table__th">Sessions (#)</th>
               <th class="dc-table__th">Capacity (RPS)</th>
               <th class="dc-table__th">Availability (%)</th>
               <th class="dc-table__th">Latency (μs)</th>
               -->
            </tr>
         </thead>
         <tbody class="dc-table__tbody js-history-thumbnail"></tbody>
      </table>
   </div>

   <div class="js-history">
      <!-- TODO:
      <h3 class="dc-h3">Availability</h3>
      <div class="dc-card">
      </div>
      -->
      <div class="js-analytics js-analytics__capacity">
      <h2 class="dc-h2">Latency analysis of <q class="js-scenario-title"></q></h2>
      <p class="dc--text-small">
         End-to-end latency is one of user-oriented characteristics used for quality assessment of distributed software architecture. The ultimate goal is the ability to quantitatively evaluate and trade-off software quality attributes to ensure competitive end-to-end latency of software solutions. This latency analysis is the investigation of a component behavior using information gathered as the service sustain artificial load.
      </p>

      <h3 class="dc-h3">Capacity (RPS)</h3>
      <p class="dc--text-small">
         The capacity measures the value of successful requests per unit of time. It reflects amount of effective traffic carried through system-under-test.
      </p>
      <div class="dc-card">
         <div class="dc-card__capacity"></div>
         <p class="dc--text-small">
            <img src="img/legend-min.png"> min
            <img src="img/legend-p50.png"> 50%
            <img src="img/legend-max.png"> max
            &nbsp;
            <img src="img/legend-p99.png"> 99%
            <img src="img/legend-p95.png"> 95%
            <img src="img/legend-p90.png"> 90%
            <img src="img/legend-p80.png"> 80%
            <img src="img/legend-p75.png"> 75%
         </p>
      </div>
      </div>

      <div class="js-analytics js-analytics__ttfb">
      <h3 class="dc-h3">Time to First Byte (μs)</h3>
      <p class="dc--text-small">
         Time to First Byte (TTFB) is the duration from making an request to the first byte of the response being received. This metric assume that the network appears to mobile application as a system that makes it wait. This delay is influenced by request transfer delay, time required by remote host to process request, and delivery time of first byte/packet of the response. TTFB represents initial confirmation that remote host is responding and client application could procedure to rendering. A primary advantage of TTFB is that it concrete, consumer oriented metric easily measurable and is defined independently of underlying solutions or technologies.
      </p>
      <div class="dc-card">
         <div class="dc-card__ttfb"></div>
         <p class="dc--text-small">
            <img src="img/legend-min.png"> min
            <img src="img/legend-p50.png"> 50%
            <img src="img/legend-max.png"> max
            &nbsp;
            <img src="img/legend-p99.png"> 99%
            <img src="img/legend-p95.png"> 95%
            <img src="img/legend-p90.png"> 90%
            <img src="img/legend-p80.png"> 80%
            <img src="img/legend-p75.png"> 75%
         </p>
      </div>
      </div>

      <div class="js-analytics js-analytics__ttmr">
      <h3 class="dc-h3">Time to Response (μs)</h3>
      <p class="dc--text-small">
         The time to display response is the most valuable metric from consumer perspective. It is influenced by performance of network and client application by itself. The time required for response rendering needs to be excluded from quality assessment due its dependency on user interface technology. Instead, Time to Meaningful Response (TTMR) is defined as network delay required to deliver response to client.
      </p>
      <div class="dc-card">
         <div class="dc-card__ttmr"></div>
         <p class="dc--text-small">
            <img src="img/legend-min.png"> min
            <img src="img/legend-p50.png"> 50%
            <img src="img/legend-max.png"> max
            &nbsp;
            <img src="img/legend-p99.png"> 99%
            <img src="img/legend-p95.png"> 95%
            <img src="img/legend-p90.png"> 90%
            <img src="img/legend-p80.png"> 80%
            <img src="img/legend-p75.png"> 75%
         </p>
      </div>
      </div>

      <div class="js-analytics js-analytics__connect">
      <h3 class="dc-h3">Network Round Trip (μs)</h3>
      <div class="dc-card">
         <div class="dc-card__connect"></div>
         <p class="dc--text-small">
            <img src="img/legend-min.png"> min
            <img src="img/legend-p50.png"> 50%
            <img src="img/legend-max.png"> max
            &nbsp;
            <img src="img/legend-p99.png"> 99%
            <img src="img/legend-p95.png"> 95%
            <img src="img/legend-p90.png"> 90%
            <img src="img/legend-p80.png"> 80%
            <img src="img/legend-p75.png"> 75%
         </p>
      </div>
      </div>

      <div class="js-analytics js-analytics__handshake">
      <h3 class="dc-h3">Protocol Handshake (μs)</h3>
      <div class="dc-card dc-card">
         <div class="dc-card__handshake"></div>
         <p class="dc--text-small">
            <img src="img/legend-min.png"> min
            <img src="img/legend-p50.png"> 50%
            <img src="img/legend-max.png"> max
            &nbsp;
            <img src="img/legend-p99.png"> 99%
            <img src="img/legend-p95.png"> 95%
            <img src="img/legend-p90.png"> 90%
            <img src="img/legend-p80.png"> 80%
            <img src="img/legend-p75.png"> 75%
         </p>
      </div>
      </div>

      <div class="js-analytics js-analytics__pps">
      <h3 class="dc-h3">Packets per Second</h3>
      <div class="dc-card">
         <div class="dc-card__pps"></div>
         <p class="dc--text-small">
            <img src="img/legend-min.png"> min
            <img src="img/legend-p50.png"> 50%
            <img src="img/legend-max.png"> max
            &nbsp;
            <img src="img/legend-p99.png"> 99%
            <img src="img/legend-p95.png"> 95%
            <img src="img/legend-p90.png"> 90%
            <img src="img/legend-p80.png"> 80%
            <img src="img/legend-p75.png"> 75%
         </p>
      </div>
      </div>

      <div class="js-analytics js-analytics__packet">
      <h3 class="dc-h3">Packets size (bytes)</h3>
      <div class="dc-card">
         <div class="dc-card__packet"></div>
         <p class="dc--text-small">
            <img src="img/legend-min.png"> min
            <img src="img/legend-p50.png"> 50%
            <img src="img/legend-max.png"> max
            &nbsp;
            <img src="img/legend-p99.png"> 99%
            <img src="img/legend-p95.png"> 95%
            <img src="img/legend-p90.png"> 90%
            <img src="img/legend-p80.png"> 80%
            <img src="img/legend-p75.png"> 75%
         </p>
      </div>
      </div>
   </div> <!-- js-history -->
   </div> <!-- js-scenario -->


<div class="dc-msg dc-msg--info">
   <div class="dc-msg__inner">
      <div class="dc-msg__icon-frame">
         <i class="dc-icon dc-msg__icon dc-icon--info"></i>
      </div>

      <div class="dc-msg__bd">
         <h1 class="dc-msg__title">Info</h1>
         <p class="dc-msg__text js-msg-info-text"></p>
      </div>
   </div>
</div>

<div class="dc-msg dc-msg--error">
   <div class="dc-msg__inner">

      <div class="dc-msg__icon-frame">
         <i class="dc-icon dc-msg__icon dc-icon--error"></i>
      </div>

      <div class="dc-msg__bd">
         <h1 class="dc-msg__title">Error message</h1>
         <p class="dc-msg__text js-msg-error-text"></p>
         <p>
            <a href="https://github.com/zalando/typhoon" class="dc-link dc-msg__bd__link" title="tooltip">You might report this issue to our project on github.com!</a>
         </p>
      </div>
   </div>
</div>

</div>
</div>

<!-- templates -->
<script type="text/template" id="scenario-thumbnail">
   <tr class="dc-table__tr dc-table__tr--interactive js-action-scenario" data-scenario="{id}">
      <td class="dc-table__td">{id}</td>
      <td class="dc-table__td">{title}</td>
      <td class="dc-table__td">{t}</td>
      <td class="dc-table__td">{n}</td>
      <td class="dc-table__td js-scenario-capacity">{capacity}</td>
      <td class="dc-table__td js-scenario-availability">{availability}</td>
      <td class="dc-table__td js-scenario-latency">{latency}</td>
      <td class="dc-table__td">
         <input type="checkbox" class="dc-checkbox dc-checkbox--alt js-shortcut-{id}">
         <label class="dc-label" data-scenario="{id}">&nbsp;</label>
      </td>
   </tr>
</script>

<script type="text/template" id="history-thumbnail">
   <tr class="dc-table__tr dc-table__tr--interactive js-action-history" data-t="{t}" data-duration="{duration}">
      <td class="dc-table__td">{timestamp}</td>
      <td class="dc-table__td">{duration}</td>
      <!-- 
      <td class="dc-table__td">{n}</td>
      <td class="dc-table__td">{capacity}</td>
      <td class="dc-table__td">{availability}</td>
      <td class="dc-table__td">{latency}</td>
      -->
   </tr>
</script>




<script type="text/template" id="scenario-new-file">
-module({id}).
-compile({parse_transform, monad}).
%%
%% typhoon scenario file
%% see https://github.com/zalando/typhoon/blob/master/docs/scenario.md
%%

%% 
-export([title/0, t/0, n/0, ttl/0]).
-export([init/0, run/1]).

%%
%% human readable scenario title.
title() -> 
   "{title}".

%% time to execute workload in milliseconds.
t() ->
   60000.

%% number of concurrent sessions to spawn in the cluster.
n() ->
   2.

%% time to live for connection spawned by scenario.
ttl() ->
   1000.

%%%----------------------------------------------------------------------------   
%%%
%%% actions
%%%
%%%----------------------------------------------------------------------------   

%%
%% init scenario configuration
init() ->
   do([m_state ||
      _ =< undefined,
      return(_)
   ]).

%%
%% execute scenario, the operation is repeated  until `t()` is expired. 
run(_Config) ->
   do([m_state ||
      _ <- request(),
      return(_)
   ]).

request() ->
   do([m_http ||
      _ /= new("http://127.0.0.1:8080/health/peer"),
      _ /= x('GET'),
      _ /= h("Connection", "keep-alive"),
      _ /= r(),
      return(_)
   ]).
</script>


<!-- libraries -->
<script src="/js/jquery-3.2.0.min.js"></script>
<script src="/js/whiskers.min.js"></script>
<script src="/js/d3.v3.min.js"></script>
<script src="/js/bullet.js"></script>
<script src="/js/cubism.v1.js"></script>
<script src="/js/monad.js"></script>
<script src="/js/typhoon.js"></script>

<script src="/js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/ace/snippets/erlang.js" type="text/javascript" charset="utf-8"></script>

</body>